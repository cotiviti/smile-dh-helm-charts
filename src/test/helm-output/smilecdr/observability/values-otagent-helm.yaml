observability:
  enabled: true
  instrumentation:
    # Install OpenTelemetry Java Agent into Smile CDR pods to expose JVM metrics
    # Otel collector is NOT installed.
    # Uses 'helm' mode which copies latest Open Telemetry jar file using file copy init containers.
    openTelemetry:
      enabled: true
      otelAgent:
        enabled: true
        # This defaults to `helm` so not really needed
        # mode: helm
        spec:
          resourceAttributes:
          - name: deployment.environment
            valueFrom:
              podLabel: env
          - name: compose_service
            value: smilecdr
          env:
          - name: OTEL_METRICS_EXPORTER
            value: "prometheus"
          - name: OTEL_EXPORTER_PROMETHEUS_PORT
            value: "9464"
          java:
            env:
            - name: OTEL_INSTRUMENTATION_METHODS_INCLUDE
              value: "ca.uhn.hl7v2.app.Responder[processMessage];ca.cdr.broker.kafka.channel.CdrKafkaAcknowledgingListener[onMessage]"
      otelCollector:
        enabled: false
